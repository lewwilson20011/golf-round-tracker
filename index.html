<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>Round Tracker</title>
<!-- Google Fonts: Montserrat (primary), Lora (serif), Hind Madurai (secondary) -->
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Lora:wght@400;500;600&family=Hind+Madurai:wght@300;400;500;600&display=swap" rel="stylesheet">
<!-- Font Awesome Icons -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
<!-- Main Stylesheets -->
<link href="css/styles.css" rel="stylesheet">
<link href="css/chat-bot.css" rel="stylesheet">
<link href="css/header-footer.css" rel="stylesheet">
<link href="css/responsive.css" rel="stylesheet">
<link href="css/feature-callout.css" rel="stylesheet">
<link href="css/mobile.css" rel="stylesheet">
<!-- Favicon and App Icons -->
<link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="icons/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="icons/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="icons/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="icons/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="icons/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="icons/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="icons/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="icons/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192" href="icons/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="icons/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
<link rel="manifest" href="icons/manifest.json">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="icons/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">
<style>
/**
 * TABLE OF CONTENTS:
 * 1. Dropdown Menu Styles
 * 2. Introduction Section Styles
 * 3. CTA Button Styles
 * 4. Card Styles (Add Round Card)
 * 5. Form Styles
 * 6. Animations
 * 7. Mobile Responsiveness
 * 8. Rounds Table Notes Truncation
 */

/* ========================================
   1. DROPDOWN MENU STYLES
   ======================================== */
.menu-dropdown {
    position: fixed;
    background: #1e293b;
    border-radius: 12px;
    width: 220px;
    display: none;
    z-index: 99999; /* Extremely high z-index */
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
    overflow: hidden;
    /* Initial position, will be updated by JS */
    top: 20px;
    right: 20px;
}
.menu-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 16px;
    color: white;
    text-decoration: none;
    font-size: 16px;
    font-family: 'Hind Madurai', sans-serif;
}
.menu-item:hover {
    background: rgba(255, 255, 255, 0.05);
}
.menu-divider {
    height: 1px;
    background: rgba(255, 255, 255, 0.1);
    margin: 8px 0;
}
/* ========================================
   2. INTRODUCTION SECTION STYLES - LIGHT VERSION
   ======================================== */

/* Main intro section container */
.intro-section {
    /* Light gradient background */
    background: linear-gradient(to bottom, rgba(240, 248, 255, 0.95), rgba(226, 232, 240, 0));
    padding: 0;
    margin-bottom: 40px;
    /*    border-bottom: 1px solid #e2e8f0;*/
    min-height: calc(100vh - 80px); /* Full viewport height minus header height */
    display: flex;
    align-items: center;
    justify-content: center;
}
/* Subtle pattern overlay for texture */
.intro-section::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: url('data:image/svg+xml,%3Csvg width="20" height="20" xmlns="http://www.w3.org/2000/svg"%3E%3Cpath d="M0 0h20v20H0z" fill="%23000000" fill-opacity="0.02"/%3E%3C/svg%3E');
    opacity: 0.3;
    pointer-events: none;
}
/* Intro content wrapper */
.intro-content {
    max-width: 1200px;
    margin: 0 auto;
    text-align: center;
    padding: 60px var(--spacing-base);
    width: 100%;
}
/* Main heading with serif font - darker for contrast */
.intro-content h1 {
    font-family: 'Lora', serif;
    font-size: 64px;
    color: #1e293b; /* Dark text for contrast */
    margin-bottom: 20px;
    animation: fadeIn 0.8s ease-out;
    font-weight: 600; /* Slightly bolder for visibility */
    letter-spacing: -0.5px;
    line-height: 1.2;
    text-shadow: 0 1px 1px rgba(0, 0, 0, 0.05); /* Subtle shadow */
}
/* Intro description text - darker for readability */
.intro-description {
    font-size: 24px;
    color: #334155; /* Slate-700 for good contrast */
    max-width: 700px;
    margin: 0 auto 40px;
    line-height: 1.6;
    animation: fadeIn 0.8s ease-out 0.2s both;
    font-weight: 400;
}
/* Features grid container */
.intro-features {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 30px;
    margin-bottom: 40px;
    animation: fadeIn 0.8s ease-out 0.4s both;
}
/* Individual feature card - lighter with border */
.intro-feature {
    max-width: 320px;
    display: flex;
    align-items: flex-start;
    text-align: left;
    padding: 24px;
    background: white;
    border-radius: 12px;
    border: 1px solid #e2e8f0;
    transition: transform 0.3s, box-shadow 0.3s;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
}
.intro-feature:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
    border-color: #cbd5e1;
}
/* Feature icons - keeping green but adjusting */
.feature-icon {
    font-size: 28px;
    color: var(--primary-green);
    margin-right: 18px;
    margin-top: 3px;
}
/* Feature text elements - darker for contrast */
.feature-text h3 {
    font-size: 18px;
    color: #1e293b; /* Dark text */
    margin-bottom: 8px;
    font-weight: 600;
}
.feature-text p {
    font-size: 14px;
    color: #475569; /* Slate-600 */
    line-height: 1.5;
}
/* Call-to-action button container */
.intro-cta {
    display: flex;
    gap: 20px;
    justify-content: center;
    margin-top: 40px;
    animation: fadeIn 0.8s ease-out 0.6s both;
}
/* ========================================
   3. CTA BUTTON STYLES
   ======================================== */
.cta-button {
    display: inline-block;
    padding: 12px 28px;
    background-color: var(--primary-green);
    color: white;
    font-weight: 600;
    border-radius: 8px;
    text-decoration: none;
    transition: all 0.3s;
    font-family: var(--font-primary);
    font-size: 24px;
    box-shadow: 0 4px 12px rgba(34, 197, 94, 0.2);
}
.cta-button:hover {
    transform: translateY(-3px);
    box-shadow: 0 6px 15px rgba(34, 197, 94, 0.3);
    background-color: #18a95e; /* Slightly darker on hover */
}
.cta-button.secondary {
    background-color: white;
    border: 1px solid var(--primary-green);
    color: var(--primary-green);
    box-shadow: 0 4px 12px rgba(34, 197, 94, 0.1);
}
.cta-button.secondary:hover {
    background-color: rgba(34, 197, 94, 0.05);
    border-color: #18a95e;
    color: #18a95e;
}

/* Mobile adjustments */
@media (max-width: 768px) {
.intro-section {
    min-height: calc(100vh - 70px); /* Adjust for smaller header on mobile */
}
.intro-content {
    padding: 40px var(--spacing-base);
}
.intro-content h1 {
    font-size: 36px;
}
.intro-description {
    font-size: 16px;
}
.intro-features {
    flex-direction: column;
    align-items: center;
    gap: 20px;
}
.intro-feature {
    width: 100%;
    padding: 20px;
}
.intro-cta {
    flex-direction: column;
    gap: 15px;
}
}
/* ========================================
   4. CARD STYLES (ADD ROUND CARD)
   ======================================== */
.card {
    transition: transform 0.3s, box-shadow 0.3s;
}
/* Make the Add Round card stand out */
.card:first-of-type {
    border: 2px solid var(--primary-green);
    box-shadow: 0 8px 24px rgba(34, 197, 94, 0.15);
    transform: translateY(-5px);
}
.card:first-of-type .card-header {
    background: linear-gradient(to right, var(--primary-green), #20b073);
    color: white;
    padding: 18px 24px;
    border-radius: .5rem;
}
.card:first-of-type .card-title {
    font-size: 20px;
    font-weight: 600;
}
.card:first-of-type .card-title .icon {
    color: white;
}
.card:first-of-type form {
    padding: 24px;
}
/* Add a "New" badge to the card */
/*
.card:first-of-type .card-header::after {
    content: 'New';
    background-color: white;
    color: var(--primary-green);
    font-size: 12px;
    font-weight: 700;
    padding: 4px 8px;
    border-radius: 20px;
    margin-left: 10px;
    position: relative;
    top: -1px;
}
*/

/* ========================================
   5. FORM STYLES
   ======================================== */
/* Style the save button more prominently */
.save-btn {
    background: var(--primary-green);
    color: white;
    font-weight: 600;
    padding: 14px 28px;
    font-size: 16px;
    border-radius: 6px;
    transition: all 0.3s;
    border: none;
    cursor: pointer;
    width: 100%;
    margin-top: 10px;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 10px;
}
.save-btn:hover {
    background: #1db863;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(34, 197, 94, 0.3);
}
.save-btn:active {
    transform: translateY(0);
}
.save-btn::after {
    content: 'â†’';
    font-size: 18px;
    transition: transform 0.3s;
}
.save-btn:hover::after {
    transform: translateX(5px);
}
/* Enhanced form controls */
.form-group {
    margin-bottom: 18px;
}
.form-group label {
    font-weight: 500;
    display: block;
    margin-bottom: 8px;
    color: white;
}
.form-group input, .form-group select, .form-group textarea {
    border: 1px solid #e2e8f0;
    padding: 12px 16px;
    border-radius: 6px;
    transition: border-color 0.3s, box-shadow 0.3s;
    width: 100%;
}
.form-group input:focus, .form-group select:focus, .form-group textarea:focus {
    border-color: var(--primary-green);
    box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.2);
    outline: none;
}

/* ========================================
   6. ANIMATIONS
   ======================================== */
/* Simple fade-in animation */
@keyframes simpleAppear {
from {
opacity: 0;
transform: translateY(20px);
}
to {
opacity: 1;
transform: translateY(0);
}
}
@keyframes fadeIn {
from {
opacity: 0;
}
to {
opacity: 1;
}
}
/* Animation classes that will be applied by JavaScript */
.fade-in {
    animation: simpleAppear 0.6s ease forwards;
    visibility: visible !important;
}
.delay-1 {
    animation-delay: 0.1s;
}
.delay-2 {
    animation-delay: 0.3s;
}
.delay-3 {
    animation-delay: 0.5s;
}
.delay-4 {
    animation-delay: 0.7s;
}
/* Make sure the main container and its children are hidden initially */
.container#main-container {
    visibility: hidden;
}

/* ========================================
   7. MOBILE RESPONSIVENESS
   ======================================== */
@media (max-width: 768px) {
/* Intro section mobile adjustments */
.intro-section {
    min-height: calc(100vh - 70px); /* Adjust for smaller header on mobile */
}
.intro-content {
    padding: 40px var(--spacing-base);
}
.intro-content h1 {
    font-size: 36px;
}
.intro-description {
    font-size: 16px;
}
.intro-features {
    flex-direction: column;
    align-items: center;
}
.intro-feature {
    width: 100%;
}
.intro-cta {
    flex-direction: column;
    gap: 15px;
}
}
/* ========================================
   8. ROUNDS TABLE NOTES TRUNCATION
   ======================================== */
/* Basic table layout styles */
.rounds-table {
    width: 100%;
    border-collapse: collapse;
}
.rounds-header {
    display: grid;
    grid-template-columns: 0.8fr 1.2fr 0.6fr 2fr 0.6fr;
    font-weight: 600;
    border-bottom: 1px solid #e2e8f0;
    padding: 12px 0;
}
.round-item {
    display: grid;
    grid-template-columns: 0.8fr 1.2fr 0.6fr 2fr 0.6fr;
    border-bottom: 1px solid #f1f5f9;
    padding: 12px 0;
    align-items: center;
}
/* Notes text truncation */
.round-item .notes-cell {
    max-height: 2.8em;           /* Limit to approximately 2 lines */
    overflow: hidden;            /* Hide overflow content */
    text-overflow: ellipsis;     /* Show ellipsis for overflow */
    display: -webkit-box;        /* Use box layout for multi-line truncation */
    -webkit-line-clamp: 2;       /* Limit to 2 lines */
    -webkit-box-orient: vertical;/* Orient text vertically */
    line-height: 1.4;            /* Set consistent line height */
    position: relative;          /* For tooltip positioning */
}
/* Tooltip for hover to see full notes */
.round-item .notes-cell:hover {
    cursor: pointer;
}
/* Add tooltip functionality with CSS only */
.round-item .notes-cell[title]:hover:after {
    content: attr(title);
    position: absolute;
    left: 0;
    top: 100%;
    z-index: 1;
    background-color: #1e293b;
    color: white;
    padding: 10px;
    border-radius: 6px;
    width: 250px;
    max-width: 100%;
    box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
    font-size: 14px;
    line-height: 1.5;
}
/* Ensure all cells have proper padding */
.rounds-header > div, .round-item > div {
    padding: 8px;
}
/* Make sure the rounds list container has proper spacing */
#roundsList {
    width: 100%;
}
/* Empty state styling */
.empty-state {
    text-align: center;
    padding: 30px;
    color: #64748b;
}
/* Add this to the end of your existing <style> tag */

/* Truncate notes to 2 lines in rounds table */
.round-item > div:nth-child(4) {
    max-height: 2.8em;           /* Limit to approximately 2 lines */
    overflow: hidden;            /* Hide overflow content */
    text-overflow: ellipsis;     /* Show ellipsis for overflow */
    display: -webkit-box;        /* Use box layout for multi-line truncation */
    -webkit-line-clamp: 2;       /* Limit to 2 lines */
    -webkit-box-orient: vertical;/* Orient text vertically */
    line-height: 1.4;            /* Set consistent line height */
}
</style>
</head>
<body>
<!-- Header (loaded via JS) -->
<div data-include="includes/header.html"></div>

<!-- Introduction Section -->
<div class="intro-section">
  <div class="intro-content">
    <h1>Welcome to Round Tracker</h1>
    <p class="intro-description">Your personal golf companion for tracking scores, analyzing performance, and improving your game.</p>
    <!--
        <div class="intro-features">
            <div class="intro-feature">
                <i class="fa-solid fa-chart-line feature-icon"></i>
                <div class="feature-text">
                    <h3>Track Your Progress</h3>
                    <p>Log rounds, view trends, and watch your handicap improve over time.</p>
                </div>
            </div>
            <div class="intro-feature">
                <i class="fa-solid fa-golf-ball-tee feature-icon"></i>
                <div class="feature-text">
                    <h3>Detailed Analytics</h3>
                    <p>Get insights on your strengths and weaknesses with our detailed performance metrics.</p>
                </div>
            </div>
            <div class="intro-feature">
                <i class="fa-solid fa-lightbulb feature-icon"></i>
                <div class="feature-text">
                    <h3>Expert Tips</h3>
                    <p>Access professional advice to improve your game and lower your scores.</p>
                </div>
            </div>
        </div>
-->
    <div class="intro-cta"> <a href="#main-container" class="cta-button" id="startTrackingBtn">Track Your Rounds</a> <a href="golf-tips.html" class="cta-button secondary">View Golf Tips</a> </div>
    <!-- Updated Feature Callout with Correctly Positioned NEW Badge -->
    <div class="feature-callout">
      <div class="new-badge">NEW</div>
      <h3>Track Your Golf Notes</h3>
      <p>New feature! Keep track of your swing thoughts, practice goals, and game improvements.</p>
      <a href="#notes-section" class="go-to-notes-btn"> <i class="fa-solid fa-arrow-down"></i> Go to Notes </a> </div>
  </div>
</div>

<!-- Main Content Container -->
<div class="container" id="main-container"> 
  <!-- Stats Overview Grid -->
  <div class="stats-grid">
    <div class="stat-card">
      <div class="stat-header"><i class="fa-solid fa-bullseye icon"></i> Average Score</div>
      <div class="stat-value" id="avgScore">-</div>
    </div>
    <div class="stat-card">
      <div class="stat-header"><i class="fa-solid fa-trophy icon"></i> Best Score</div>
      <div class="stat-value" id="bestScore">-</div>
    </div>
    <div class="stat-card">
      <div class="stat-header"><i class="fa-solid fa-clock icon"></i> Total Rounds</div>
      <div class="stat-value" id="totalRounds">0</div>
    </div>
  </div>
  
  <!-- Main Content Area -->
  <div class="main-content"> 
    <!-- Add Round Card -->
    <div class="card">
      <div class="card-title"><i class="fa-solid fa-calendar icon"></i> Add Round</div>
      <form>
        <div class="form-group">
          <label>Date</label>
          <input type="date" id="roundDate" required>
        </div>
        <div class="form-group">
          <label>Course</label>
          <input
                        type="text"
                        id="courseSelect"
                        list="courseList"
                        placeholder="Start typing to search courses..."
                        required
                    >
          <datalist id="courseList"> 
            <!-- Will be populated from database --> 
          </datalist>
        </div>
        <div class="form-group">
          <label>Number of Holes</label>
          <select id="holesSelect">
            <option>18 Holes</option>
            <option>9 Holes</option>
          </select>
        </div>
        <div class="form-group">
          <label>Score</label>
          <input type="number" id="scoreInput" min="20" max="200" required>
        </div>
        <div class="form-group">
          <label>Notes</label>
          <textarea id="notes" rows="4" placeholder="How was your round?"></textarea>
        </div>
        <!-- Updated Save Round button structure -->
        <div class="save-round-container">
  <button type="submit" class="save-btn">Save Round</button>
</div>

      </form>
    </div>
    
    <!-- Recent Rounds Card -->
    <div class="card">
      <div class="card-title"><i class="fa-solid fa-clock icon"></i> Recent Rounds</div>
      <div class="rounds-table">
        <div class="rounds-header">
          <div>Date</div>
          <div>Course</div>
          <div>Score</div>
          <div>Notes</div>
          <div>Actions</div>
        </div>
        <div id="roundsList"> 
          <!-- Empty state will be shown here when no rounds are logged --> 
        </div>
      </div>
    </div>
    
    <!-- Golf Notes Card -->
    <div id="notes-section" class="card">
      <div class="card-title"><i class="fa-solid fa-clipboard-list icon"></i> My Golf Notes</div>
      <div class="notes-container">
        <div id="notesList"> 
          <!-- Notes will be displayed here -->
          <div class="empty-notes-state">
            <p>No notes yet. Add your first note to keep track of your golf goals and tips.</p>
          </div>
        </div>
        <div class="note-form">
          <div class="form-group">
            <label>Add a Note</label>
            <textarea id="newNote" rows="3" placeholder="Write down swing thoughts, practice goals, or things to work on..."></textarea>
          </div>
          <div class="add-note-container">
  <button type="button" class="add-note-btn" id="addNoteBtn">Add Note</button>
</div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Footer (loaded via JS) -->
<div data-include="includes/footer.html"></div>

<!-- DROPDOWN MENU -->
<div id="menuDropdown" class="menu-dropdown"> <a href="#" class="menu-item" id="signOutLink"> <i class="fa-solid fa-right-from-bracket"></i> Sign Out </a> </div>

<!-- Back to Top Button -->
<button id="backToTopBtn" title="Go to top"><i class="fa-solid fa-chevron-up"></i></button>

<!-- Scripts --> 
<!-- Supabase CDN script MUST be loaded first --> 
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script> 

<!-- Load main app scripts --> 
<script type="module" src="js/supabase.js"></script> 
<script type="module" src="js/script.js"></script> 
<script type="module" src="js/chat-bot.js"></script> 
<script type="module" src="js/notes.js"></script>

<!-- Sign Out Functionality --> 
<script type="module">
import { signOut } from './js/supabase.js';

document.addEventListener('DOMContentLoaded', function() {
    console.log('Setting up sign out functionality');
    
    // Simple menu toggle function
    function toggleMenu(event) {
        event.stopPropagation();
        
        var dropdown = document.getElementById("menuDropdown");
        if (dropdown.style.display === "block") {
            dropdown.style.display = "none";
        } else {
            dropdown.style.display = "block";
        }
    }
    
    // Add click handler to menu buttons
    var menuButtons = document.querySelectorAll('.menu-button');
    menuButtons.forEach(function(btn) {
        btn.addEventListener('click', toggleMenu);
    });
    
    // Close dropdown when clicking outside
    document.addEventListener('click', function(event) {
        var dropdown = document.getElementById("menuDropdown");
        var isClickInsideMenu = event.target.closest('.menu-dropdown');
        var isMenuToggleClick = event.target.closest('.menu-button') || event.target.closest('.fa-bars');
        
        if (dropdown && dropdown.style.display === "block" && !isClickInsideMenu && !isMenuToggleClick) {
            dropdown.style.display = "none";
        }
    });
    
    // Direct sign out handler
    var signOutLink = document.getElementById('signOutLink');
    if (signOutLink) {
        signOutLink.addEventListener('click', async function(e) {
            e.preventDefault();
            console.log('Sign out link clicked');
            
            // Use the imported signOut function
            await signOut();
        });
    }
});
</script> 

<!-- Back to Top Script --> 
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Start Tracking button smooth scroll
    const startTrackingBtn = document.getElementById('startTrackingBtn');
    if (startTrackingBtn) {
        startTrackingBtn.addEventListener('click', function(e) {
            e.preventDefault();
            
            const mainContainer = document.getElementById('main-container');
            if (mainContainer) {
                mainContainer.scrollIntoView({ 
                    behavior: 'smooth' 
                });
            }
        });
    }
    
    // Get the back to top button
    var backToTopBtn = document.getElementById("backToTopBtn");
    
    // When the user scrolls down 300px from the top of the document, show the button
    window.onscroll = function() {
        if (document.body.scrollTop > 300 || document.documentElement.scrollTop > 300) {
            backToTopBtn.style.display = "block";
        } else {
            backToTopBtn.style.display = "none";
        }
    };
    
    // When the user clicks on the button, scroll to the top of the document
    backToTopBtn.addEventListener('click', function() {
        // Smooth scroll to top
        window.scrollTo({
            top: 0,
            behavior: 'smooth'
        });
    });
});
</script> 

<!-- Header/Footer Initialization --> 
<script type="module">
    import { initializeHeaderFooter } from './js/header-footer.js';
    initializeHeaderFooter();
</script> 

<!-- Animations Script --> 
<script>
// Simple animation script
window.addEventListener('load', function() {
    console.log('Page fully loaded - running animations');
    
    // Select elements to animate
    const mainContainer = document.getElementById('main-container');
    if (!mainContainer) {
        console.error('Main container not found');
        return;
    }
    
    // Add fade-in class to container first
    mainContainer.classList.add('fade-in');
    
    // Then animate children with delays
    setTimeout(function() {
        const statsGrid = mainContainer.querySelector('.stats-grid');
        if (statsGrid) {
            statsGrid.classList.add('fade-in', 'delay-1');
        }
        
        const cards = mainContainer.querySelectorAll('.card');
        cards.forEach((card, index) => {
            const delay = index === 0 ? 'delay-2' : 'delay-3';
            setTimeout(function() {
                card.classList.add('fade-in', delay);
            }, 200 * (index + 1));
        });
    }, 100);
    
    // Also animate on button click
    const startTrackingBtn = document.getElementById('startTrackingBtn');
    if (startTrackingBtn) {
        startTrackingBtn.addEventListener('click', function(e) {
            e.preventDefault();
            
            // Scroll to the container
            mainContainer.scrollIntoView({behavior: 'smooth'});
            
            // Get all animatable elements
            const statsGrid = mainContainer.querySelector('.stats-grid');
            const cards = mainContainer.querySelectorAll('.card');
            
            // Remove existing animation classes
            mainContainer.classList.remove('fade-in');
            if (statsGrid) statsGrid.classList.remove('fade-in', 'delay-1');
            cards.forEach(card => {
                card.classList.remove('fade-in', 'delay-2', 'delay-3');
            });
            
            // Force reflow to restart animations
            void mainContainer.offsetWidth;
            
            // Re-add animation classes after a short delay
            setTimeout(function() {
                mainContainer.classList.add('fade-in');
                
                setTimeout(function() {
                    if (statsGrid) {
                        statsGrid.classList.add('fade-in', 'delay-1');
                    }
                    
                    cards.forEach((card, index) => {
                        const delay = index === 0 ? 'delay-2' : 'delay-3';
                        setTimeout(function() {
                            card.classList.add('fade-in', delay);
                        }, 200 * (index + 1));
                    });
                }, 100);
            }, 400);
        });
    }
});
</script> 
<script>
// Add this script to truncate notes to 2 lines
document.addEventListener('DOMContentLoaded', function() {
  // Function to apply truncation to existing round items
  function applyNoteTruncation() {
    // Find all round items
    const roundItems = document.querySelectorAll('.round-item');
    
    roundItems.forEach(item => {
      // Find the notes cell (4th child, index 3)
      const notesCell = item.children[3];
      if (notesCell) {
        // Apply styles directly
        Object.assign(notesCell.style, {
          maxHeight: '2.8em',
          overflow: 'hidden',
          textOverflow: 'ellipsis',
          display: '-webkit-box',
          WebkitLineClamp: '2',
          WebkitBoxOrient: 'vertical',
          lineHeight: '1.4'
        });
        
        // Store full text as attribute for tooltip
        const fullText = notesCell.textContent;
        notesCell.setAttribute('title', fullText);
      }
    });
  }
  
  // Apply immediately to existing round items
  applyNoteTruncation();
  
  // Watch for new rounds being added and apply truncation
  // This uses a MutationObserver to detect changes to the roundsList
  const roundsList = document.getElementById('roundsList');
  if (roundsList) {
    const observer = new MutationObserver(function(mutations) {
      applyNoteTruncation();
    });
    
    observer.observe(roundsList, { 
      childList: true,    // Watch for added/removed rounds
      subtree: true       // Watch for changes in descendants too
    });
  }
});
</script>
</body>
</html>